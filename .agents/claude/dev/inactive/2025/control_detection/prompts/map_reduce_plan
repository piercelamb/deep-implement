ultrathink

okay so we now have all of the "reasons" why a ground truth control maps to a given policy document. These are represented in individual json files and in aggregated .md files

What we want to do now is follow a map-reduce style pattern where we combine all the reasons from one page and its adjacent page (with one page overlap between prompts) in a prompt and ask the LLM to discover generalities between the control detection styles of the two sets of reasons

when we finish the first pass, we'll have half the prompts to run where we combine the next set of generalities, then the next set until we combine the last two for our ultimate set of generalities

Does this approach make sense?

It should use the same thing we did for prompting in this plan @.agents/claude/dev/active/control_detection/planning/ground_truth_explanations/plan.md (prompts on disk loaded at runtime with context replacing placeholders etc)

It should be able to do each step of the map-reduce in parallel with configureable values for how many execute at a given time

It should follow a test driven development plan

Create a plan and write it to @.agents/claude/dev/active/control_detection/planning/map_reduce